var LiveBroadcast=function(){function e(e,a,n,t){null==e&&(e=i()),n||(n=-1),null!=t&&(m="True"===t),$.ajax({url:"/LiveBroadCast/GetMatchListPartial?t="+(e?"m":"w")+"&matchType="+n+"&mobileScreen="+m,type:"GET",async:!0,cache:!1,success:function(a){$(a).is("#noDataAvaible")?($("div#page-nav").removeClass("hidden"),$("#mt-1").removeClass("hidden")):$("div#page-nav").removeClass("hidden"),$("#MatchListContainer").html(a);var i=$("#matchTypeList").data("value").split(","),t=_.difference(["1","2","5","6","19","23","20","4"],i),r=[],o=[];if(e&&!f){_.each(t,function(e){var a,n="1"===(a=e)?1:"2"===a?2:"5"===a?3:"23"===a?4:"6"===a?5:"19"===a?6:"20"===a?7:"4"===a?8:void 0;r.push(n)}),o=function(e){for(var a=!1;!a;){a=!0;for(var n=1;n<e.length;n+=1)if(e[n-1]>e[n]){a=!1;var i=e[n-1];e[n-1]=e[n],e[n]=i}}return e}(r);for(var l=0;l<o.length;l++){var s=o[l];0===l?$("#page-nav > .selectbox-tabs")[0][s].remove():$("#page-nav > .selectbox-tabs")[0][s-l].remove()}f=!0}else{_.each(t,function(e){$("#mt"+e).addClass("hidden")});var d=[];d.push(n.toString());var c=_.difference(t,d);if(t.length>c.length){$("#mt-1").addClass("active")}}}})}function a(e){if(videojs.getAllPlayers().length&&videojs.getAllPlayers()[0].dispose(),m&&window.location.href.indexOf("/iddaa/detail/")<=0&&window.location.href.indexOf("/LiveBroadCast/Player")<=0)$("#mVideoPLayerPopup").show(),$(".videoContent").html('<video id="liveVideo" class="video-js vjs-default-skin vjs-nofull vjs-big-play-centered" oncontextmenu="return false;" controls preload="auto" x-webkit-airplay="deny" playsinline>Canlı yayın izletilememektedir. Sorun tarayıcınızın veya cihazınızın desteklememesinden kaynaklanmaktadır. Farklı bir tarayıcıdan tekrar deneyebilirsiniz.</video>');else if(m&&window.location.href.indexOf("/iddaa/detail/")>0){if(!($("#tabContentDetail").length>0&&0!==$(".match-detail-menu.live.active").length))return;$("#divPlayer").html('<video id="liveVideo" class="video-js vjs-default-skin vjs-nofull vjs-big-play-centered" oncontextmenu="return false;" controls preload="auto" x-webkit-airplay="deny" playsinline>Canlı yayın izletilememektedir. Sorun tarayıcınızın veya cihazınızın desteklememesinden kaynaklanmaktadır. Farklı bir tarayıcıdan tekrar deneyebilirsiniz.</video>')}else $("#divPlayer").html('<video id="liveVideo" class="video-js vjs-default-skin vjs-nofull vjs-big-play-centered" oncontextmenu="return false;" controls preload="auto" x-webkit-airplay="deny" playsinline>Canlı yayın izletilememektedir. Sorun tarayıcınızın veya cihazınızın desteklememesinden kaynaklanmaktadır. Farklı bir tarayıcıdan tekrar deneyebilirsiniz.</video>');var a=!!(m&&window.location.href.indexOf("/LiveBroadCast/Player")<=0),n=videojs("liveVideo",{autoplay:!0,fluid:!0,controlBar:{fullscreenToggle:a}}),i=[];e.forEach(function(e){var a=window.location.protocol;-1==e.indexOf(a)&&"local.nesine.com"!=window.location.host||i.push({src:e})}),n.src(i),n.ready(function(){n.tech_&&n.tech_.off("dblclick")}),n.on("pause",function(){n.one("play",function(){n.currentTime(999)})}),ResponsiveUI.ScreenInfo.IsTouch()&&window.location.href.indexOf("/LiveBroadCast/Player")>0&&n.requestFullscreen(),n.play(),c(2,e[0],"")}function n(e){m&&window.location.href.indexOf("/iddaa/detail/")<=0&&window.location.href.indexOf("/LiveBroadCast/Player")<=0?($("#mVideoPLayerPopup").show(),$(".videoContent").addClass("alert alert-info").html('<i class="nsn-i-info"></i><div class="text-content">'+e+"</div>")):$("#divPlayer").addClass("alert alert-info").html('<i class="nsn-i-info"></i><div class="text-content">'+e+"</div>")}function i(){return ResponsiveUI.DeviceInfo.IsMobileDevice}function t(e,a,n){if(Nesine.Instances.Membership.IsLogin()){y=Nesine.Instances.Membership.settings.Id;var i="/LiveBroadCast/Player?bcid="+e+"&p="+a;",width=630",",height=500",window.open(i,e,"toolbar=no,scrollbars=no,location=no,statusbar=no,menubar=no,resizable=yes,width=630,height=500")}else{var t="?t=";n||(t=window.location.search,n=""),function(e){Nesine.Instances.LoginWrapper.DisplayLoginDialog(function(){e&&(window.location=e)},null)}(n+t)}}function r(e,a){if(u=e,a,Nesine.Instances.Membership.IsLogin())y=Nesine.Instances.Membership.settings.Id,l(),o(e,a);else{var n="";$(".livestream-content .streamlist-main .tab-menu span.active")&&(1==$(".livestream-content .streamlist-main .tab-menu span.active").index()?n="f":2==$(".livestream-content .streamlist-main .tab-menu span.active").index()&&(n="b")),i="/Canli-Mac-Izle"+(""!=n?"?t="+n:""),Nesine.Instances.LoginWrapper.DisplayLoginDialog(function(){i&&(window.location=i)},null)}var i}function o(e,i){m&&window.location.href.indexOf("/iddaa/detail/")<=0&&window.location.href.indexOf("/LiveBroadCast/Player")<=0?($("#mVideoPLayerPopup").show(),$(".videoContent").removeClass("alert alert-info").html("")):$("#divPlayer").removeClass("alert alert-info").html("");var t,r,o="",l="";e>0&&i>0?($.ajax({url:"/LiveBroadCast/MobileStreamUrl?bcid="+e,type:"GET",async:!1,cache:!1,success:function(e){var a=e.split("|");if(0!==a.length){var i=a[0].split("&")[0];l=a[0].split("&")[2],"status=ok"==i?o=decodeURIComponent(a[0].split("&")[1]):n("status=ProviderBroadcastCancelled"==i?"Canlı yayın iptal edilmiştir.":"status=ProviderTechnicalProblem"==i?"Bu etkinliğe ait canlı yayında\nyayıncı kuruluştan kaynaklanan problem yaşanmaktadır.\nLütfen daha sonra tekrar deneyiniz":"status=NesineTechnicalProblem"==i?"Bu etkinlik teknik problemler sebebiyle\nyayın akışından kaldırılmıştır":"status=EventCancelled"==i?"Bu etkinlik iptal edildiğinden\nyayın akışından kaldırılmıştır":"status=NotAllowedUserForMatch"==i?p:"Canlı yayın bilgileri alınamadı!"),a.length>1&&(m="isMobileDevice=True"===a[1])}},error:function(){n("Bir sorun oluştu, lütfen daha sonra tekrar deneyiniz.")}}),o.length>0&&("5"==i||"2"==i?(t=o,r=a,$.ajax({url:t,type:"GET",dataType:"xml",cache:!1,success:function(e){$(e).find("token").each(function(){var a=$(this).attr("url"),i=$(this).attr("status");"0"==i?r([a]):(n("-1"==i?"Bu maça ait yayın bulunduğunuz lokasyona sağlanamamaktadır":"-2"==i?"Canlı yayına erişilemedi\nLütfen daha sonra tekrar deneyiniz\n( I-K )":"Canlı yayına erişilemedi\nLütfen daha sonra tekrar deneyiniz\n( U-E )"),s(t,e),c(2,a,n))})},error:function(e,a,i){n("Canlı yayına erişilemiyor\n( X-P )"),c(2,t,e.responseText)}})):"7"==i||"6"==i?function(e,a){$.ajax({url:e,type:"GET",dataType:"json",cache:!1,success:function(i){if(i){var t="";"200"==i.statusCode&&i.hlsUrl?a([i.hlsUrl]):t="400"==i.statusCode?"Canlı yayına erişilemedi. Lütfen daha sonra tekrar deneyiniz\n( 400-BR )":"401"==i.statusCode?"Canlı yayına erişilemedi. Lütfen daha sonra tekrar deneyiniz\n( 401-AE )":"403"==i.statusCode?"Bu maça ait yayın bulunduğunuz lokasyona sağlanamamaktadır":"404"==i.statusCode?"Canlı yayına erişilemedi. Lütfen daha sonra tekrar deneyiniz\n( 404-NF )":"500"==i.statusCode?"Canlı yayına erişilemedi. Lütfen daha sonra tekrar deneyiniz\n( 500-IE )":"Canlı yayına erişilemedi\nLütfen daha sonra tekrar deneyiniz\n( UN-ER )",""!=t&&(n(t),s(e,i),c(2,i.hlsUrl,t))}else n("Canlı yayına erişilemedi\nLütfen daha sonra tekrar deneyiniz."),s(e,"repsonse is undefined - this is a custom message of ours")},error:function(a,i,t){n("Canlı yayına erişilemiyor"),c(2,e,a.responseText)}})}(o,a):"9"==i||"8"==i?function(e,a,i){$.ajax({url:e,type:"POST",headers:{Authorization:"Bearer "+a},cache:!1,success:function(a){if(a){var t="";if(a.launchInfo.streamLauncher.length>0){for(var r=new Array,o=0;o<a.launchInfo.streamLauncher.length;o++)a.launchInfo.streamLauncher[o].launcherURL.indexOf("rtmp")<0&&r.push(a.launchInfo.streamLauncher[o].launcherURL);r.length>0?i(r):t="Canlı yayına erişilemedi. Lütfen daha sonra tekrar deneyiniz\n( 400-BR )"}else t="10201"==a.errorCode?"Canlı yayına erişilemedi. Lütfen daha sonra tekrar deneyiniz\n( 400-BR )":"10202"==a.errorCode?"Canlı yayına erişilemedi. Lütfen daha sonra tekrar deneyiniz\n( 401-AE )":"10203"==a.errorCode?"Bu maça ait yayın bulunduğunuz lokasyona sağlanamamaktadır":"10400"==a.errorCode?"Canlı yayına erişilemedi. Lütfen daha sonra tekrar deneyiniz\n( 404-NF )":"20210"==a.errorCode?"Canlı yayına erişilemedi. Lütfen daha sonra tekrar deneyiniz\n( 500-IE )":"Canlı yayına erişilemedi\nLütfen daha sonra tekrar deneyiniz\n( UN-ER )";""!=t&&(n(t),s(e,a),c(2,e,t))}else n("Canlı yayına erişilemedi\nLütfen daha sonra tekrar deneyiniz."),s(e,"repsonse is undefined - this is a custom message of ours"),c(2,e,"repsonse is undefined - this is a custom message of ours")},error:function(a,i,t){n("Canlı yayın bilgileri alınamadı!"),c(2,e,a.responseText)}})}(o,l,a):"10"==i&&window.setTimeout(function(){var e=new Array;e.push(o),a(e)},300))):n("Bir sorun oluştu, lütfen daha sonra tekrar deneyiniz.")}function l(){Nesine.Instances.Membership.IsLogin()?(y=Nesine.Instances.Membership.settings.Id,$(".livestream-content .streamlist-main .top-bar .signin").hide(),$(".livestream-content .streamlist-main .top-bar .login").hide(),$(".livestream-content .streamlist-main .top-bar .top-text").show()):$(".livestream-content .streamlist-main .top-bar .top-text").hide()}function s(e,a,n){if(n=n||"mobileWeb",LiveBroadcast.canLogError&&e&&a){var i=d(a);"DOM"===i?a=(new XMLSerializer).serializeToString(a):"Object"===i&&(a=JSON.stringify(a)),e=btoa(e),a=btoa(a),$.ajax({url:"/LiveBroadCast/LogRequest",type:"post",data:{platformName:n,req:e,res:a}})}}function d(e){if(e)return"object"==typeof e?e instanceof Node?"DOM":"Object":typeof e}function c(e,a,n){if(Nesine&&Nesine.Configuration&&Nesine.Configuration.EnableLiveBroadCastLogging&&n&&n.length>0){var i=encodeURI(n).substr(0,2e3);$.ajax({url:"/LiveBroadCast/LogRequestV2",type:"post",data:{memberId:y,broadcastChannelId:u,logType:e,req:a,ErrorMessage:i}})}}var u,y,f=!1,m=!1,v=function(e){var a="";""!=e&&e.length>0&&(a="1"==e[0].OpenInNewTab?"<div><a target='_blank' style='border:none;' href='"+e[0].clickurl+"'><img src='"+e[0].bannerurl+"'></a></div>":"<div><a style='border:none;' href='"+e[0].clickurl+"'><img src='"+e[0].bannerurl+"'></a></div>"),$("#bannercontainer").html(a)},p="<p>Bu maçı canlı izleyebilmeniz için; etkinliğin iddaa kuponunuzda yer alması, son 24 saat içerisinde iddaa ya da spor toto kuponu oynamış olmanız veya nesine.com'da bakiyeniz olması gerekmektedir.<a href='/iddaa' target='_blank'>Bültene Git</a></p>";return{Init:function(a,n,t){var r=i();LiveBroadcast.canLogError=t,$("#mVideoPLayerPopup").hide();var o,s=function(e){e=e.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var a=new RegExp("[\\?&]"+e+"=([^&#]*)").exec(location.search);return null==a?"":decodeURIComponent(a[1].replace(/\+/g," "))}("t");"f"==s?$(".livestream-content .streamlist-main .tab-menu span:eq(1)"):"b"==s&&$(".livestream-content .streamlist-main .tab-menu span:eq(2)"),e(r,0,n),r?l():(o=$(".right-banner").height(),$(".livestream-main .livestream-content .streamlist-main").css("min-height",o-20)),setInterval(function(){!function(a){e(null,0,a)}(n)},1e3*a)},PlayWebPlayer:function(e,a,n){Kvk.Check({onloginsucceed:function(){LiveBroadcast.PlayWebPlayer(e,a,n)},onapproved:function(){t(e,a,n)},page:"canli izle",popuptype:Kvk.PopType.live})},PlayMobileVideo:function(e,a){Kvk.Check({onloginsucceed:function(){r(e,a)},onapproved:function(){r(e,a)},page:"canli izle",popuptype:Kvk.PopType.live})},PlayBroadcastHlsVideo:function(e,a){Kvk.Check({onloginsucceed:function(){r(e,a)},onapproved:function(){r(e,a)},page:"canli izle",popuptype:Kvk.PopType.live})},PlayHlsOnPlayerPopup:function(e,a){u=e,a,y=0,o(e,a)},GetBanner:function(){$.ajax({type:"GET",url:"/LiveBroadCast/GetAffiliateBanner",dataType:"json",async:!0,success:function(e){v(e)},error:function(e){$("#bannercontainer").html("")}})},LogErrorsFromFlash:function(e,a){if(a){var n="",i=typeof a;if("object"===i)if(a.currentTarget&&a.currentTarget.data){var t=typeof a.currentTarget.data;if("string"===dataTye)n=a.currentTarget.data;else if("object"===t){var r=d(t);"DOM"===r?n=(new XMLSerializer).serializeToString(a.currentTarget.data):"Object"===r&&(n=JSON.stringify(a.currentTarget.data))}}else n="".concat("text: ",a.text,"-","type:",a.type);else"string"===i&&(n=a);s(e,n=n.replace(/\s/gi,""),"web")}},EnableLog:function(e){LiveBroadcast.canLogError=e},CloseMplayer:function(){$("#mVideoPLayerPopup").hide(),$(".videoContent").html("")},LoadMatches:e}}();